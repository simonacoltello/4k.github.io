<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>4K Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

<style>
/* --- 1. RESET & BASICS --- */
html, body {
  margin: 0; padding: 0;
  background: black;
  color: #535353; 
  font-family: 'Roboto', Helvetica, Arial, sans-serif;
  height: 100%; width: 100%;
  overflow: hidden !important;
}

/* --- 2. BACKGROUND & FADE --- */
#bg {
  position: fixed;
  top: 0; left: 50%;
  transform: translateX(-50%);
  width: auto; height: 18vh;
  min-width: 100vw;
  object-fit: cover;
  object-position: 50% 40%; 
  z-index: 0;
}

#fade {
  position: fixed;
  top: 15vh; left: 0;
  width: 100%; height: calc(100vh - 15vh);
  background: linear-gradient(to bottom, rgba(0,0,0,0), black);
  z-index: 1;
}

/* --- 3. TOP BAR --- */
#top {
  position: absolute;
  top: 19vh; left: 30px; right: 30px;
  display: flex; justify-content: space-between; align-items: center;
  z-index: 10; font-size: 14px;
  pointer-events: none;
}
#top div, #top #logo { pointer-events: auto; }
#logo img {
  height: 30px;
  filter: invert(33%) sepia(0%) saturate(0%) brightness(95%) contrast(88%);
}

/* --- 4. LISTA CENTRALE --- */
#scroll {
  position: absolute;
  top: calc(15vh + 30px); 
  left: 50%;
  transform: translateX(-50%);
  width: 260px;
  z-index: 5;
  text-align: center;
  line-height: 0.60; 
}
#scroll div {
  padding: 4px 0;
  font-size: 14px;
  cursor: pointer;
  transition: color 0.2s ease;
  color: #535353;
}
#scroll div:hover { color: #ffffff; }

/* --- 5. MODAL (GALLERY EDGE-TO-EDGE) --- */
#project-modal {
  display: none; 
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0); 
  z-index: 2000;
  justify-content: center; align-items: center;
}

.modal-content {
  background: #000;
  border: 1px solid #333;
  width: 90%; 
  max-width: 1100px;
  height: 60vh; 
  display: flex; 
  position: relative;
  box-shadow: 0 0 50px rgba(0,0,0,1);
  overflow: hidden;
}

.modal-image-side { 
  flex: 1.3; 
  border-right: 1px solid #333; 
  background: #111;
}
.modal-image-side img { width: 100%; height: 100%; object-fit: cover; }

.modal-info-side { 
  flex: 1; 
  display: flex;
  flex-direction: column; 
  text-align: left;
  background: #000;
}

.text-container { 
  padding: 50px 40px; 
  flex-grow: 1; 
}
.modal-info-side h2 { font-size: 18px; font-weight: 300; margin: 0; color: #888; text-transform: uppercase; }
.subtitle { font-size: 13px; margin-top: 5px; margin-bottom: 25px; opacity: 0.5; }
.description { font-size: 14px; line-height: 1.6; color: #535353; }

/* GALLERY CHE COPRE TUTTO IL FONDO SENZA SPAZI */
#modal-gallery {
  display: flex;
  width: 100%; 
  height: 110px; 
  border-top: 1px solid #333;
  margin: 0; 
  padding: 0;
}

#modal-gallery img {
  width: 25%; 
  height: 100%;
  object-fit: cover;
  cursor: pointer;
  opacity: 0.5;
  transition: 0.2s;
  border-right: 1px solid #333;
}
#modal-gallery img:last-child { border-right: none; }
#modal-gallery img:hover { opacity: 1; }

.traffic-lights { position: absolute; top: 15px; right: 15px; display: flex; gap: 6px; z-index: 10; }
.dot { width: 10px; height: 10px; border-radius: 50%; }
.green { background: #27c93f; }
.yellow { background: #ffbd2e; }
.red { background: #ff5f56; cursor: pointer; }

/* --- 6. CADUTA LETTERE ABOUT --- */
.fall-letter {
  position: absolute;
  color: #535353;
  font-size: 14px;
  pointer-events: none;
  z-index: 9999;
}

/* --- 7. WIDGET simona 50% E DRAGGABLE --- */
#widget-simona {
  position: fixed;
  bottom: 250px;
  left: 30px;
  width: 500px;
  z-index: 1500;
  pointer-events: auto;
  cursor: pointer;
  transition: filter 0.1s;
}
#widget-simona:hover {
  filter: hue-rotate(180deg) saturate(1.5);
}
#widget-simona img { width: 100%; display: block; }
#widget-simona video {
  position: absolute;
  top: 36px;
  left: 50%;
  transform: translateX(-50%);
  width: 79px;
  height: 92.5px;
  object-fit: cover;
  border-radius: 13px;
  z-index: 2;
  filter: contrast(1.05) brightness(0.95);
  pointer-events: none;
}

/* Play button area (triangolo play) */
#widget-simona .play-area {
  position: absolute;
  top: 72px;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  height: 30px;
  cursor: pointer;
  z-index: 3;
}

/* Stop button area (quadrato stop) */
#widget-simona .stop-area {
  position: absolute;
  top: 108px;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  height: 30px;
  cursor: pointer;
  z-index: 3;
}

/* --- 8. WIDGET DOG 50% E DRAGGABLE --- */
#widget-dog {
  position: fixed;
  bottom: 30px;
  width: 130px;
  z-index: 1500;
  pointer-events: auto;
  cursor: move;
  transition: filter 0.1s;
}
#widget-dog:hover {
  filter: hue-rotate(90deg) saturate(2);
}
#widget-dog img { width: 100%; display: block; }
#widget-dog video {
  position: absolute;
  top: 36px;
  left: 50%;
  transform: translateX(-50%);
  width: 79px;
  height: 92.5px;
  object-fit: cover;
  border-radius: 13px;
  z-index: 2;
  filter: contrast(1.05) brightness(0.95);
}

/* --- 9. FINESTRE RISOLUZIONI --- */
.resolution-window {
  position: fixed;
  bottom: 0;
  right: 0;
  border: 1px solid;
  background: #000;
  overflow: hidden;
  box-shadow: 0 0 20px rgba(0,0,0,0.8);
  cursor: pointer;
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 0.4s ease, transform 0.4s ease;
}

.resolution-window.visible {
  opacity: 1;
  transform: scale(1);
}

.resolution-label {
  position: absolute;
  top: 5px;
  right: 5px;
  font-size: 10px;
  color: #888;
  background: rgba(0,0,0,0.7);
  padding: 2px 5px;
  border-radius: 3px;
  z-index: 10;
  pointer-events: none;
}

#window-4k { 
  display: none;
  top: 0;
  left: 0;
  width: 100vw; 
  height: 100vh; 
  border-color: #ff0000; 
  border-width: 1px; 
  z-index: 899; 
}

#window-1080p { 
  display: none;
  width: 720px; 
  height: 405px; 
  border-color: #ff0000; 
  border-width: 1px; 
  z-index: 1000; 
}

#window-720p { 
  display: none;
  width: 480px; 
  height: 270px; 
  border-color: #ff0000; 
  border-width: 1px; 
  z-index: 1100; 
}

#window-dvd { 
  display: none;
  width: 320px; 
  height: 180px; 
  border-color: #ff0000; 
  border-width: 1px; 
  z-index: 1200; 
}

#window-vcd { 
  display: block;
  width: 210px; 
  height: 118px; 
  border-color: #ff0000; 
  border-width: 1px; 
  z-index: 1600; 
  opacity: 1;
  transform: scale(1);
}

.resolution-window iframe { 
  width: 100%; height: 100%; 
  border: none; 
  pointer-events: none; 
}
</style>
</head>

<body>

<!-- BACKGROUND VIDEO -->
<video id="bg" autoplay muted loop playsinline>
  <source src="assets/Video/beeonflower.mp4" type="video/mp4">
</video>
<div id="fade"></div>

<!-- TOP BAR -->
<div id="top">
  <div id="logo"><img src="assets/Logo/logo4k.svg" alt="4K Logo"></div>
  <div>Works &nbsp; <span id="link-about" style="cursor:pointer;">About</span> &nbsp; Contact &nbsp; Cellula</div>
</div>

<!-- CENTRAL LIST -->
<div id="scroll">
  <div onclick="openProject('slamjam')">Slam Jam</div>
  <div onclick="openProject('nike')">Nike</div>
  <div onclick="openProject('magliano')">Magliano</div>
  <div onclick="openProject('hglf')">HGLF</div>
  <div onclick="openProject('trashgirls')">TrashGirls8000</div>
  <div onclick="openProject('amsterdam')">Amsterdam Junglist Kru</div>
  <div onclick="openProject('sperm')">Sperm Studios</div>
  <div onclick="openProject('dysphoria')">Dysphoria</div>
  <div onclick="openProject('autostraddle')">Autostraddle</div>
  <div onclick="openProject('forthem')">For Them</div>
  <div onclick="openProject('hundebiss')">Hundebiss</div>
  <div onclick="openProject('cellula')">Cellula</div>
  <div onclick="openProject('robot')">Robot Festival</div>
  <div onclick="openProject('bim')">Bim Milano</div>
  <div onclick="openProject('sozzani')">Fondazione Sozzani</div>
  <div onclick="openProject('specific')">Specific</div>
  <div onclick="openProject('pessima')">Pessima</div>
  <div onclick="openProject('people')">People Of Meat</div>
  <div onclick="openProject('slamjam')">Slam Jam</div>
  <div onclick="openProject('nike')">Nike</div>
  <div onclick="openProject('magliano')">Magliano</div>
  <div onclick="openProject('hglf')">HGLF</div>
  <div onclick="openProject('trashgirls')">TrashGirls8000</div>
  <div onclick="openProject('amsterdam')">Amsterdam Junglist Kru</div>
  <div onclick="openProject('sperm')">Sperm Studios</div>
  <div onclick="openProject('dysphoria')">Dysphoria</div>
  <div onclick="openProject('autostraddle')">Autostraddle</div>
  <div onclick="openProject('forthem')">For Them</div>
  <div onclick="openProject('hundebiss')">Hundebiss</div>
  <div onclick="openProject('cellula')">Cellula</div>
  <div onclick="openProject('robot')">Robot Festival</div>
  <div onclick="openProject('bim')">Bim Milano</div>
  <div onclick="openProject('sozzani')">Fondazione Sozzani</div>
  <div onclick="openProject('specific')">Specific</div>
  <div onclick="openProject('pessima')">Pessima</div>
  <div onclick="openProject('people')">People Of Meat</div>
</div>

<!-- MODAL -->
<div id="project-modal" onclick="closeProject()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <div class="traffic-lights">
      <div class="dot green"></div>
      <div class="dot yellow"></div>
      <div class="dot red" onclick="closeProject()"></div>
    </div>
    <div class="modal-image-side"><img src="" id="modal-main-img"></div>
    <div class="modal-info-side">
      <div class="text-container">
          <h2 id="modal-title"></h2>
          <p class="subtitle" id="modal-subtitle"></p>
          <p class="description" id="modal-desc"></p>
      </div>
      <div id="modal-gallery"></div>
    </div>
  </div>
</div>

<!-- WIDGET DOG -->
<div id="widget-dog">
  <img src="assets/Widgets/widgetdog.png" alt="Widget Dog">
  <video autoplay muted loop playsinline>
    <source src="widgetvideo.mp4" type="video/mp4">
  </video>
</div>

<!-- WIDGET simona -->
<div id="widget-simona">
  <img src="assets/Widgets/4K WIDGET BY SIMONA.png" alt="Widget Simona">
  <video autoplay muted loop playsinline>
    <source src="widgetvideo.mp4" type="video/mp4">
  </video>
  <div class="play-area"></div>
  <div class="stop-area"></div>
</div>

<!-- FINESTRE RISOLUZIONI -->
<div id="window-4k" class="resolution-window">
  <div class="resolution-label">4K</div>
  <iframe srcdoc="<!DOCTYPE html><html><head><style>body{margin:0;background:#000;overflow:hidden;width:100vw;height:100vh}</style></head><body><video autoplay muted loop playsinline style='width:100%;height:100%;object-fit:cover;image-rendering:crisp-edges'><source src='assets/Video/beeonflower.mp4' type='video/mp4'></video></body></html>"></iframe>
</div>

<div id="window-1080p" class="resolution-window">
  <div class="resolution-label">1080p</div>
  <iframe srcdoc="<!DOCTYPE html><html><head><style>body{margin:0;background:#000;overflow:hidden}</style></head><body><video autoplay muted loop playsinline style='width:100%;height:100%;object-fit:cover'><source src='assets/Video/beeonflower.mp4' type='video/mp4'></video></body></html>"></iframe>
</div>

<div id="window-720p" class="resolution-window">
  <div class="resolution-label">720p</div>
  <iframe srcdoc="<!DOCTYPE html><html><head><style>body{margin:0;background:#000;overflow:hidden}</style></head><body><video autoplay muted loop playsinline style='width:100%;height:100%;object-fit:cover'><source src='assets/Video/beeonflower.mp4' type='video/mp4'></video></body></html>"></iframe>
</div>

<div id="window-dvd" class="resolution-window">
  <div class="resolution-label">DVD</div>
  <iframe srcdoc="<!DOCTYPE html><html><head><style>body{margin:0;background:#000;overflow:hidden}</style></head><body><video autoplay muted loop playsinline style='width:100%;height:100%;object-fit:cover;filter:blur(0.5px)'><source src='assets/Video/beeonflower.mp4' type='video/mp4'></video></body></html>"></iframe>
</div>

<div id="window-vcd" class="resolution-window">
  <div class="resolution-label">VCD</div>
  <iframe srcdoc="<!DOCTYPE html><html><head><style>body{margin:0;background:#000;overflow:hidden}</style></head><body><video autoplay muted loop playsinline style='width:100%;height:100%;object-fit:cover;filter:blur(1px)'><source src='assets/Video/beeonflower.mp4' type='video/mp4'></video></body></html>"></iframe>
</div>

<script>
// --- PROGETTI ---
const projectsData = {
  'slamjam': {
    title: 'SLAM JAM X NEW BALANCE',
    subtitle: 'A project curated by Lars',
    desc: 'Inspired by ancient greek mythology explores the reasons one person would choose to become freelancer.',
    imgs: ['assets/Images/Clients/Slamjam/1.jpg', 'assets/Images/Clients/Slamjam/2.jpg', 'assets/Images/Clients/Slamjam/3.jpg', 'assets/Images/Clients/Slamjam/4.jpg']
  }
};

// --- MODAL ---
function openProject(id) {
  const project = projectsData[id] || { 
    title: id.toUpperCase(), 
    subtitle: 'Project Info', 
    desc: 'Description coming soon...', 
    imgs: [
      'https://via.placeholder.com/600x600/111?text=1', 
      'https://via.placeholder.com/600x600/222?text=2', 
      'https://via.placeholder.com/600x600/333?text=3', 
      'https://via.placeholder.com/600x600/444?text=4'
    ] 
  };

  document.getElementById('modal-title').innerText = project.title;
  document.getElementById('modal-subtitle').innerText = project.subtitle;
  document.getElementById('modal-desc').innerText = project.desc;
  
  const mainImg = document.getElementById('modal-main-img');
  const gallery = document.getElementById('modal-gallery');
  gallery.innerHTML = "";
  
  mainImg.src = project.imgs[0];
  
  project.imgs.slice(0, 4).forEach(src => {
    const thumb = document.createElement('img');
    thumb.src = src;
    thumb.onclick = () => mainImg.src = src;
    gallery.appendChild(thumb);
  });

  document.getElementById('project-modal').style.display = 'flex';
}

function closeProject() {
  document.getElementById('project-modal').style.display = 'none';
}

// --- CADUTA LETTERE ABOUT ---
document.getElementById('link-about').addEventListener('click', () => {
  const scrollContainer = document.getElementById('scroll');
  const divs = Array.from(scrollContainer.querySelectorAll('div'));

  divs.forEach(div => {
    const text = div.innerText;
    div.style.visibility = 'hidden';

    for (let i = 0; i < text.length; i++) {
      const char = text[i];
      if (char === ' ') continue;

      const range = document.createRange();
      range.setStart(div.firstChild, i);
      range.setEnd(div.firstChild, i + 1);
      const rect = range.getBoundingClientRect();

      const span = document.createElement('span');
      span.className = 'fall-letter';
      span.innerText = char;

      const style = window.getComputedStyle(div);
      span.style.font = style.font;
      span.style.color = style.color;
      span.style.fontWeight = style.fontWeight;

      span.style.left = rect.left + 'px';
      span.style.top = rect.top + 'px';

      document.body.appendChild(span);

      let posY = rect.top;
      let posX = rect.left;
      let velocityY = 0;
      let velocityX = (Math.random() - 0.5) * 1.5;
      let rotation = 0;
      let rotationSpeed = (Math.random() - 0.5) * 8;
      const gravity = 0.3;
      
      const animate = () => {
        velocityY += gravity;
        posY += velocityY;
        posX += velocityX;
        rotation += rotationSpeed;
        
        span.style.top = posY + 'px';
        span.style.left = posX + 'px';
        span.style.transform = `rotate(${rotation}deg)`;
        
        if (posY < window.innerHeight + 100) {
          requestAnimationFrame(animate);
        } else {
          span.remove();
        }
      };
      
      setTimeout(() => requestAnimationFrame(animate), Math.random() * 100);
    }
  });

  scrollContainer.style.visibility = 'hidden';
});

// --- CLICK RESOLUTION WINDOWS ---
let resolutionsOpen = false;

// Apri solo cliccando su VCD
document.getElementById('window-vcd').addEventListener('click', (e) => {
  e.stopPropagation();
  
  if (!resolutionsOpen) {
    // Widget vanno sotto
    widgetSimona.style.zIndex = '800';
    widgetDog.style.zIndex = '800';
    
    // Apri tutte le finestre con animazione fluida
    const dvd = document.getElementById('window-dvd');
    const w720 = document.getElementById('window-720p');
    const w1080 = document.getElementById('window-1080p');
    const w4k = document.getElementById('window-4k');
    
    dvd.style.display = 'block';
    setTimeout(() => dvd.classList.add('visible'), 10);
    
    setTimeout(() => {
      w720.style.display = 'block';
      setTimeout(() => w720.classList.add('visible'), 10);
    }, 150);
    
    setTimeout(() => {
      w1080.style.display = 'block';
      setTimeout(() => w1080.classList.add('visible'), 10);
    }, 300);
    
    setTimeout(() => {
      w4k.style.display = 'block';
      setTimeout(() => w4k.classList.add('visible'), 10);
    }, 450);
    
    resolutionsOpen = true;
  }
});

// Chiudi cliccando ovunque (tranne su VCD)
document.addEventListener('click', (e) => {
  if (resolutionsOpen && !e.target.closest('#window-vcd')) {
    // Widget tornano sopra
    widgetSimona.style.zIndex = '1500';
    widgetDog.style.zIndex = '1500';
    
    // Chiudi con animazione inversa
    const w4k = document.getElementById('window-4k');
    const w1080 = document.getElementById('window-1080p');
    const w720 = document.getElementById('window-720p');
    const dvd = document.getElementById('window-dvd');
    
    w4k.classList.remove('visible');
    setTimeout(() => w4k.style.display = 'none', 400);
    
    setTimeout(() => {
      w1080.classList.remove('visible');
      setTimeout(() => w1080.style.display = 'none', 400);
    }, 150);
    
    setTimeout(() => {
      w720.classList.remove('visible');
      setTimeout(() => w720.style.display = 'none', 400);
    }, 300);
    
    setTimeout(() => {
      dvd.classList.remove('visible');
      setTimeout(() => dvd.style.display = 'none', 400);
    }, 450);
    
    resolutionsOpen = false;
  }
});

// --- AUDIO PLAYER ---
const audio = new Audio('assets/Music/04 - Carousel.mp3');
let isPlaying = false;

// --- DRAG WIDGET SIMONA ---
const widgetSimona = document.getElementById('widget-simona');
let isDraggingSimona = false, offsetXSimona = 0, offsetYSimona = 0;
let hasMoved = false;

const playArea = widgetSimona.querySelector('.play-area');
const stopArea = widgetSimona.querySelector('.stop-area');

// Click sul widget intero per play/pause
widgetSimona.addEventListener('click', (e) => {
  if (!hasMoved && !e.target.classList.contains('play-area') && !e.target.classList.contains('stop-area')) {
    if (isPlaying) {
      audio.pause();
      isPlaying = false;
    } else {
      audio.play();
      isPlaying = true;
    }
  }
  hasMoved = false;
});

playArea.addEventListener('click', (e) => {
  e.stopPropagation();
  audio.play();
  isPlaying = true;
});

stopArea.addEventListener('click', (e) => {
  e.stopPropagation();
  audio.pause();
  audio.currentTime = 0;
  isPlaying = false;
});

widgetSimona.addEventListener('mousedown', e => {
  if (e.target.classList.contains('play-area') || e.target.classList.contains('stop-area')) return;
  isDraggingSimona = true;
  hasMoved = false;
  offsetXSimona = e.clientX - widgetSimona.getBoundingClientRect().left;
  offsetYSimona = e.clientY - widgetSimona.getBoundingClientRect().top;
  widgetSimona.style.transition = 'none';
  e.preventDefault();
});

document.addEventListener('mousemove', e => {
  if (!isDraggingSimona) return;
  hasMoved = true;
  e.preventDefault();
  widgetSimona.style.left = e.clientX - offsetXSimona + 'px';
  widgetSimona.style.top = e.clientY - offsetYSimona + 'px';
  widgetSimona.style.bottom = 'auto';
});

document.addEventListener('mouseup', () => {
  isDraggingSimona = false;
});

// --- DRAG WIDGET DOG ---
const widgetDog = document.getElementById('widget-dog');
let isDraggingDog = false, offsetXDog = 0, offsetYDog = 0;

widgetDog.style.left = '30px';
widgetDog.style.bottom = '30px';

widgetDog.addEventListener('mousedown', e => {
  isDraggingDog = true;
  offsetXDog = e.clientX - widgetDog.getBoundingClientRect().left;
  offsetYDog = e.clientY - widgetDog.getBoundingClientRect().top;
  widgetDog.style.transition = 'none';
  e.preventDefault();
});

document.addEventListener('mousemove', e => {
  if (!isDraggingDog) return;
  e.preventDefault();
  widgetDog.style.left = e.clientX - offsetXDog + 'px';
  widgetDog.style.top = e.clientY - offsetYDog + 'px';
  widgetDog.style.bottom = 'auto';
});

document.addEventListener('mouseup', () => {
  isDraggingDog = false;
});
</script>

</body>
</html>