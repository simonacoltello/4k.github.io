<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>4K Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

<style>
/* --- 1. RESET & BASICS --- */
html, body {
  margin: 0; padding: 0;
  background: black;
  color: #535353; 
  font-family: 'Roboto', Helvetica, Arial, sans-serif;
  height: 100%; width: 100%;
  overflow: hidden !important; 
}

/* --- 2. BACKGROUND & FADE --- */
#bg {
  position: fixed;
  top: 0; left: 50%;
  transform: translateX(-50%);
  width: auto; height: 18vh;
  min-width: 100vw;
  object-fit: cover;
  object-position: 50% 40%; 
  z-index: 0;
}

#fade {
  position: fixed;
  top: 15vh; left: 0;
  width: 100%; height: calc(100vh - 15vh);
  background: linear-gradient(to bottom, rgba(0,0,0,0), black);
  z-index: 1;
}

/* --- 3. TOP BAR --- */
#top {
  position: absolute;
  top: 19vh; left: 30px; right: 30px;
  display: flex; justify-content: space-between; align-items: center;
  z-index: 10; font-size: 14px;
  pointer-events: none;
}
#top div, #top #logo { pointer-events: auto; }
#logo img {
  height: 30px;
  filter: invert(33%) sepia(0%) saturate(0%) brightness(95%) contrast(88%);
}

/* --- 4. LISTA CENTRALE --- */
#scroll {
  position: absolute;
  top: calc(15vh + 30px); 
  left: 50%;
  transform: translateX(-50%);
  width: 260px;
  z-index: 5;
  text-align: center;
  line-height: 0.60; 
}
#scroll div {
  padding: 4px 0;
  font-size: 14px;
  cursor: pointer;
  transition: color 0.2s ease;
  color: #535353;
}
#scroll div:hover { color: #ffffff; }

/* --- 5. MODAL (GALLERY EDGE-TO-EDGE) --- */
#project-modal {
  display: none; 
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0); 
  z-index: 2000;
  justify-content: center; align-items: center;
}

.modal-content {
  background: #000;
  border: 1px solid #333;
  width: 90%; 
  max-width: 1100px;
  height: 60vh; 
  display: flex; 
  position: relative;
  box-shadow: 0 0 50px rgba(0,0,0,1);
  overflow: hidden;
}

.modal-image-side { 
  flex: 1.3; 
  border-right: 1px solid #333; 
  background: #111;
}
.modal-image-side img { width: 100%; height: 100%; object-fit: cover; }

.modal-info-side { 
  flex: 1; 
  display: flex;
  flex-direction: column; 
  text-align: left;
  background: #000;
}

.text-container { 
  padding: 50px 40px; 
  flex-grow: 1; 
}
.modal-info-side h2 { font-size: 18px; font-weight: 300; margin: 0; color: #888; text-transform: uppercase; }
.subtitle { font-size: 13px; margin-top: 5px; margin-bottom: 25px; opacity: 0.5; }
.description { font-size: 14px; line-height: 1.6; color: #535353; }

/* GALLERY CHE COPRE TUTTO IL FONDO SENZA SPAZI */
#modal-gallery {
  display: flex;
  width: 100%; 
  height: 110px; 
  border-top: 1px solid #333;
  margin: 0; 
  padding: 0;
}

#modal-gallery img {
  width: 25%; 
  height: 100%;
  object-fit: cover;
  cursor: pointer;
  opacity: 0.5;
  transition: 0.2s;
  border-right: 1px solid #333;
}
#modal-gallery img:last-child { border-right: none; }
#modal-gallery img:hover { opacity: 1; }

.traffic-lights { position: absolute; top: 15px; right: 15px; display: flex; gap: 6px; z-index: 10; }
.dot { width: 10px; height: 10px; border-radius: 50%; }
.green { background: #27c93f; }
.yellow { background: #ffbd2e; }
.red { background: #ff5f56; cursor: pointer; }

/* --- 6. CADUTA LETTERE ABOUT --- */
.fall-letter {
  position: absolute;
  color: #fff;
  font-size: 14px;
  pointer-events: none;
  opacity: 1;
  transition: transform 2s ease-in, opacity 2s ease-in;
  z-index: 9999;
}
</style>
</head>

<body>

<video id="bg" autoplay muted loop playsinline>
  <source src="assets/video/beeonflower.mp4" type="video/mp4">
</video>
<div id="fade"></div>

<div id="top">
  <div id="logo"><img src="assets/logo/logo4k.svg" alt="4K Logo"></div>
  <div>Works &nbsp; <span id="link-about" style="cursor:pointer;">About</span> &nbsp; Contact &nbsp; Cellula</div>
</div>

<div id="scroll">
  <div onclick="openProject('slamjam')">Slam Jam</div>
  <div onclick="openProject('nike')">Nike</div>
  <div onclick="openProject('magliano')">Magliano</div>
  <div onclick="openProject('hglf')">HGLF</div>
  <div onclick="openProject('trashgirls')">TrashGirls8000</div>
  <div onclick="openProject('amsterdam')">Amsterdam Junglist Kru</div>
  <div onclick="openProject('sperm')">Sperm Studios</div>
  <div onclick="openProject('dysphoria')">Dysphoria</div>
  <div onclick="openProject('autostraddle')">Autostraddle</div>
  <div onclick="openProject('forthem')">For Them</div>
  <div onclick="openProject('hundebiss')">Hundebiss</div>
  <div onclick="openProject('cellula')">Cellula</div>
  <div onclick="openProject('robot')">Robot Festival</div>
  <div onclick="openProject('bim')">Bim Milano</div>
  <div onclick="openProject('sozzani')">Fondazione Sozzani</div>
  <div onclick="openProject('specific')">Specific</div>
  <div onclick="openProject('pessima')">Pessima</div>
  <div onclick="openProject('people')">People Of Meat</div>
</div>

<div id="project-modal" onclick="closeProject()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <div class="traffic-lights">
      <div class="dot green"></div>
      <div class="dot yellow"></div>
      <div class="dot red" onclick="closeProject()"></div>
    </div>
    <div class="modal-image-side"><img src="" id="modal-main-img"></div>
    <div class="modal-info-side">
      <div class="text-container">
          <h2 id="modal-title"></h2>
          <p class="subtitle" id="modal-subtitle"></p>
          <p class="description" id="modal-desc"></p>
      </div>
      <div id="modal-gallery"></div>
    </div>
  </div>
</div>

<script>
const projectsData = {
  'slamjam': {
    title: 'SLAM JAM X NEW BALANCE',
    subtitle: 'A project curated by Lars',
    desc: 'Inspired by ancient greek mythology explores the reasons one person would choose to become freelancer.',
    imgs: ['assets/img/slam1.jpg', 'assets/img/slam2.jpg', 'assets/img/slam3.jpg', 'assets/img/slam4.jpg']
  }
};

function openProject(id) {
  const project = projectsData[id] || { 
    title: id.toUpperCase(), 
    subtitle: 'Project Info', 
    desc: 'Description coming soon...', 
    imgs: [
      'https://via.placeholder.com/600x600/111?text=1', 
      'https://via.placeholder.com/600x600/222?text=2', 
      'https://via.placeholder.com/600x600/333?text=3', 
      'https://via.placeholder.com/600x600/444?text=4'
    ] 
  };

  document.getElementById('modal-title').innerText = project.title;
  document.getElementById('modal-subtitle').innerText = project.subtitle;
  document.getElementById('modal-desc').innerText = project.desc;
  
  const mainImg = document.getElementById('modal-main-img');
  const gallery = document.getElementById('modal-gallery');
  gallery.innerHTML = "";
  
  project.imgs.slice(0, 4).forEach((src) => {
    const thumb = document.createElement('img');
    thumb.src = src;
    thumb.onclick = () => { mainImg.src = src; };
    gallery.appendChild(thumb);
  });

  document.getElementById('project-modal').style.display = 'flex';
}

function closeProject() {
  document.getElementById('project-modal').style.display = 'none';
}

/* --- ANIMAZIONE LETTERE CADENTI PERFETTA --- */
document.getElementById('link-about').addEventListener('click', () => {
  const scrollContainer = document.getElementById('scroll');
  const divs = Array.from(scrollContainer.querySelectorAll('div'));

  divs.forEach(div => {
    const text = div.innerText;

    // Nascondiamo il div originale
    div.style.visibility = 'hidden';

    for (let i = 0; i < text.length; i++) {
      const char = text[i];
      if (char === ' ') continue;

      // Creiamo un range per prendere la posizione esatta del carattere
      const range = document.createRange();
      range.setStart(div.firstChild, i);
      range.setEnd(div.firstChild, i + 1);
      const rect = range.getBoundingClientRect();

      // Creiamo span per la lettera
      const span = document.createElement('span');
      span.className = 'fall-letter';
      span.innerText = char;

      // Copiamo lo stile
      const style = window.getComputedStyle(div);
      span.style.font = style.font;
      span.style.color = style.color;
      span.style.fontWeight = style.fontWeight;

      // Posizione precisa
      span.style.left = rect.left + 'px';
      span.style.top = rect.top + 'px';

      document.body.appendChild(span);

      // Caduta casuale
      const xVel = (Math.random() - 0.5) * 200;  // movimento orizzontale casuale
      const yVel = 600 + Math.random() * 200;    // caduta verticale
      const rot = (Math.random() - 0.5) * 720;   // rotazione

      setTimeout(() => {
        span.style.transform = `translate(${xVel}px, ${yVel}px) rotate(${rot}deg)`;
        span.style.opacity = 0;
      }, Math.random() * 200);

      setTimeout(() => span.remove(), 2500);
    }
  });

  // Nascondiamo il container originale
  scrollContainer.style.visibility = 'hidden';
});

</script>

</body>
</html>
